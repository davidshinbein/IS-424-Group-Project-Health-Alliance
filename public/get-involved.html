<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>
      Get Involved & Member Requirements | Global Health Alliance UW-Madison
    </title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css"
    />

    <link rel="stylesheet" href="/styles/header.css" />
    <link rel="stylesheet" href="/styles/leadership.css" />
    <style>
      .body {
        max-width: 900px;
        margin: 0 auto;
        padding: 2rem 1rem;
      }
    </style>
    <base href="/" />
  </head>
  <body>
    <header class="has-text-centered p-4">
      <figure class="image is-64x64 is-inline-block">
        <img src="/images/ghalogo.png" alt="logo" />
      </figure>
      <h1 class="title has-text-white">Global Health Alliance UW-Madison</h1>
      <nav class="navbar">
        <div class="navbar-menu is-active is-flex is-justify-content-center">
          <a class="navbar-item has-text-white" href="index.html">Home</a>
          <a class="navbar-item has-text-white" href="what-we-do.html"
            >What We Do</a
          >
          <a class="navbar-item has-text-white" href="Leadership.html"
            >Meet The Team</a
          >
          <a class="navbar-item has-text-white" href="calendar.html"
            >Calendar</a
          >
          <a class="navbar-item has-text-white" href="get-involved.html"
            >Get Involved & Member Requirements</a
          >
          <a class="navbar-item has-text-white" href="globalpartners.html"
            >Global Partners</a
          >
          <!-- Sign In removed; calendar page provides admin auth -->
        </div>
      </nav>
    </header>

    <main class="section" style="background-color: #fff8ea; min-height: 80vh">
      <div class="container has-text-centered">
        <!-- Image of Requirements -->
        <section class="section has-text-centered py-0 my-0">
          <div class="container p-3">
            <figure class="image" style="width: 60vw; margin: 0 auto">
              <img
                src="/images/MemRequirements.png"
                alt="Member Requirements"
                style="width: 100%; height: auto"
              />
            </figure>
          </div>
        </section>
        <!-- end of requirement image -->

        <!-- New Section -->
        <section class="section has-text-centered py-0 my-0">
          <div class="container">
            <h2
              class="title is-3 has-text-black"
              style="
                display: inline-block;
                padding: 0.5em 1em;
                border-radius: 8px;
                background-color: #d8dfc1;
              "
            >
              Connect With Us At gha.uwmadison@gmail.com
            </h2>
            <!-- Contact form: name, email, comment -->
            <div class="section" style="margin-top: 1.25rem">
              <div class="container is-max-desktop">
                <form id="contactForm" class="box" aria-label="Contact form">
                  <div class="field">
                    <label class="label">Name</label>
                    <div class="control">
                      <input
                        class="input"
                        type="text"
                        name="name"
                        id="contactName"
                        placeholder="Your name"
                        required
                      />
                    </div>
                  </div>

                  <div class="field">
                    <label class="label">Email</label>
                    <div class="control">
                      <input
                        class="input"
                        type="email"
                        name="email"
                        id="contactEmail"
                        placeholder="you@example.com"
                        required
                      />
                    </div>
                  </div>

                  <div class="field">
                    <label class="label">Comment</label>
                    <div class="control">
                      <textarea
                        class="textarea"
                        name="message"
                        id="contactMessage"
                        rows="5"
                        placeholder="Tell us what you'd like to share"
                        required
                      ></textarea>
                    </div>
                  </div>

                  <div class="field is-grouped is-grouped-right">
                    <div class="control">
                      <button
                        type="submit"
                        class="button is-link"
                        id="contactSubmit"
                      >
                        Send Message
                      </button>
                    </div>
                    <div class="control">
                      <button
                        type="button"
                        class="button is-light"
                        id="contactReset"
                      >
                        Reset
                      </button>
                    </div>
                  </div>

                  <div
                    id="contactFeedback"
                    role="status"
                    aria-live="polite"
                    style="margin-top: 0.75rem"
                  ></div>
                </form>
              </div>
            </div>
          </div>
        </section>
        <!-- End of Section -->
      </div>
    </main>

    <footer
      class="footer has-text-centered"
      style="
        background-color: #192d86;
        border-top: 5px solid black;
        color: #fff;
        padding: 20px;
      "
    >
      <p>&copy; 2025 Global Health Alliance UW-Madison</p>
      <p>gha.uwmadison@gmail.com</p>
      <a
        href="https://www.instagram.com/ghauwmadison/"
        target="_blank"
        class="instagram-link-footer"
      >
        <svg
          class="instagram-icon-footer"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
          <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
          <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
        </svg>
      </a>
    </footer>

    <!-- Firebase + Contact Form Logic -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyA7LwW6tkidme79K4hztoGFI-uf90JR4Kk",
        authDomain: "is-424-global-health-alliance.firebaseapp.com",
        projectId: "is-424-global-health-alliance",
        storageBucket: "is-424-global-health-alliance.firebasestorage.app",
        messagingSenderId: "174606565995",
        appId: "1:174606565995:web:5f4a37ae7cfc023eb3a72e",
      };

      firebase.initializeApp(firebaseConfig);
      const db = firebase.firestore();

      document.addEventListener("DOMContentLoaded", () => {
        const form = document.getElementById("contactForm");
        if (!form) return;

        const nameInput = document.getElementById("contactName");
        const emailInput = document.getElementById("contactEmail");
        const messageInput = document.getElementById("contactMessage");
        const submitBtn = document.getElementById("contactSubmit");
        const resetBtn = document.getElementById("contactReset");
        const feedback = document.getElementById("contactFeedback");

        form.addEventListener("submit", (e) => {
          e.preventDefault();

          const name = nameInput.value.trim();
          const email = emailInput.value.trim();
          const message = messageInput.value.trim();

          if (!name || !email || !message) {
            feedback.textContent =
              "Please fill out all fields before submitting.";
            feedback.style.color = "red";
            return;
          }

          submitBtn.disabled = true;
          feedback.textContent = "Sending...";
          feedback.style.color = "black";

          db.collection("contactMessages")
            .add({
              name,
              email,
              message,
              createdAt: firebase.firestore.FieldValue.serverTimestamp(),
            })
            .then(() => {
              feedback.textContent =
                "Thank you! Your message has been sent.";
              feedback.style.color = "green";
              form.reset();
            })
            .catch((error) => {
              console.error("Error saving message:", error);
              feedback.textContent =
                "Error sending message. Please try again.";
              feedback.style.color = "red";
            })
            .finally(() => {
              submitBtn.disabled = false;
            });
        });

        if (resetBtn) {
          resetBtn.addEventListener("click", () => {
            form.reset();
            feedback.textContent = "";
          });
        }
      });
    </script>
  </body>
</html>
